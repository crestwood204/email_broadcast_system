<div>
  <span style="float: right;">
    <form class="form-inline my-2 my-lg-0">
      <input id="search" class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" value="{{search}}">
      <button id="search-btn" class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      <span style="padding: 4px;"> </span>
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">+</button>
    </form>
  </span>
  <h1> Broadcasts </h1>
  <table class="table">
      <thead>
          <tr>
              <th scope="col">#</th>
              <th scope="col">Username</th>
              <th scope="col">To</th>
              <th scope="col">Subject</th>
              <th scope="col">Date</th>
          </tr>
      </thead>
      <tbody>
          {{#each broadcasts}}
              <tr class="clickable-row" data-href="/broadcast?id={{this._id}}">
                  <th scope="row">{{math @index "+" ../startIndex}}</th>
                  <td style="min-width: 20%;">{{this.from.username}}</td>
                  <td style="min-width: 20%;">{{this.to}}</td>
                  <td style="width: 50%;">{{this.subjectString}}</td>
                  <td style="width: 15%;">{{this.dateString}}</td>
              </tr>

          {{/each}}
      </tbody>
  </table>
  {{#if noBroadcasts}}
      <h3> No Broadcasts Have Been Sent </h3>
  {{/if}}
  {{#unless noBroadcasts}}
    {{#if noResults}}
      <h4> No Results Found</h4>
    {{/if}}
  {{/unless}}
  <div class="d-flex justify-content-end">
    <nav aria-label="Page navigation example">
      <ul class="pagination">
        {{#compare page 1}}
          <li class="page-item disabled">
        {{/compare}}
        {{#compare page 1 operator="!=="}}
          <li class="page-item">
        {{/compare}}
          <a class="page-link" href="/?page={{math page "-" 1}}&search={{search}}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
            <span class="sr-only">Previous</span>
          </a>
        </li>
        {{#compare page 1}}
          <li class="page-item"><a class="page-link" href="/?page=1&search={{../search}}"><b>1</b></a></li>
          {{#compare ../last 2 operator=">="}}
            <li class="page-item"><a class="page-link" href="/?page=2&search={{../search}}">2</a></li>
          {{/compare}}
          {{#compare ../last 2 operator="<"}}
            <li class="page-item disabled"><a class="page-link" href="/?page=2&search={{../search}}">2</a></li>
          {{/compare}}
          {{#compare ../last 3 operator=">="}}
            <li class="page-item"><a class="page-link" href="/?page=3&search={{../search}}">3</a></li>
          {{/compare}}
          {{#compare ../last 3 operator="<"}}
            <li class="page-item disabled"><a class="page-link" href="/?page=3&search={{../search}}">3</a></li>
          {{/compare}}
        {{/compare}}
        {{#compare page 1 operator="!=="}}
          <li class="page-item"><a class="page-link" href="/?page={{math ../page "-" 1}}&search={{../search}}">{{math ../page "-" 1}}</a></li>
          <li class="page-item"><a class="page-link" href="/?page={{../page}}&search={{../search}}"><b>{{../page}}</b></a></li>
          {{#compare ../last ../page operator=">"}}
            <li class="page-item"><a class="page-link" href="/?page={{math ../page "+" 1}}&search={{../search}}">{{math ../page "+" 1}}</a></li>
          {{/compare}}
          {{#compare ../last ../page operator="<="}}
            <li class="page-item disabled"><a class="page-link" href="/?page={{math ../page "+" 1}}&search={{../search}}">{{math ../page "+" 1}}</a></li>
          {{/compare}}
        {{/compare}}
        {{#compare last page operator=">"}}
          <li class="page-item">
        {{/compare}}
        {{#compare last page operator="<="}}
          <li class="page-item disabled">
        {{/compare}}
          <a class="page-link" href="/?page={{math page "+" 1}}&search={{search}}" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
            <span class="sr-only">Next</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
  <script src="/js/collapsible_table.js"></script>
  <script src="/js/table_search.js"></script>
</div>
